<h1><%= @member.name %></h1>

<div style="margin-bottom: 20px;">
  <strong>Total Votes:</strong> <%= @votes.count %>
</div>

<h2>Voting History</h2>

<% if @votes.any? %>
  <table style="width: 100%; border-collapse: collapse;">
    <thead>
      <tr style="text-align: left; background: #eee;">
        <th style="padding: 10px;">Date</th>
        <th style="padding: 10px;">Body</th>
        <th style="padding: 10px;">Motion</th>
        <th style="padding: 10px;">Vote</th>
        <th style="padding: 10px;">Outcome</th>
      </tr>
    </thead>
    <tbody>
      <% @votes.each do |vote| %>
        <tr style="border-bottom: 1px solid #ddd;">
          <td style="padding: 10px;"><%= vote.motion.meeting.starts_at&.strftime("%Y-%m-%d") %></td>
          <td style="padding: 10px;"><%= vote.motion.meeting.body_name %></td>
          <td style="padding: 10px;">
            <%= link_to truncate(vote.motion.description, length: 100), meeting_path(vote.motion.meeting) %>
          </td>
          <td style="padding: 10px;">
            <span style="color: <%= vote.value == 'yes' ? 'green' : (vote.value == 'no' ? 'red' : 'grey') %>">
              <%= vote.value.titleize %>
            </span>
          </td>
          <td style="padding: 10px;"><%= vote.motion.outcome.titleize %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No voting history found.</p>
<% end %>

<br>
<%= link_to "Back to Officials", members_path %>
