<div id="merge-modal"
     class="modal"
     data-controller="modal"
     data-action="click->modal#close"
     hidden>

  <div class="card modal__panel" data-action="click->modal#stop">
    <h2 class="text-lg font-bold mb-4">Merge Topic</h2>
    <p class="mb-4">Merge <strong data-modal-target="sourceName"></strong> into another topic.</p>
    <p class="text-sm text-secondary mb-4">The source topic will become an alias of the target topic.</p>

    <form method="post" action="" data-modal-target="form">
      <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
      
      <div data-controller="topic-search">
        <input type="hidden" name="target_topic_id" data-topic-search-target="targetId">
        
        <div class="mb-4">
          <label class="block text-sm font-bold mb-1">Target Topic</label>
          
          <div class="flex gap-2 items-center mb-2" data-topic-search-target="selection" style="display:none">
            <span class="font-bold" data-topic-search-target="targetName"></span>
            <button type="button" class="text-xs text-danger" data-action="click->topic-search#clear">Change</button>
          </div>

          <input type="text" class="form-input w-full" 
                 placeholder="Search topics..." 
                 data-topic-search-target="input" 
                 data-action="input->topic-search#search">
          
          <div class="modal__results" data-topic-search-target="results"></div>
        </div>

        <div class="flex justify-end gap-2">
          <button type="button" class="btn btn--secondary" data-action="click->modal#close">Cancel</button>
          <button type="submit" class="btn btn--danger" data-topic-search-target="submit" disabled>Merge & Create Alias</button>
        </div>
      </div>
    </form>
  </div>
</div>
