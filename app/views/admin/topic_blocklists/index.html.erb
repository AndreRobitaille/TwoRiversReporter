<% content_for(:title) { "Topic Blocklist - Admin" } %>

<div class="page-header">
  <div class="flex items-center justify-between">
    <h1 class="page-title">Topic Blocklist</h1>
    <div class="flex gap-2">
      <%= link_to "Back to Topics", admin_topics_path, class: "btn btn--secondary" %>
    </div>
  </div>
</div>

<div class="card p-6 mb-6">
  <h2 class="text-lg font-bold mb-4">Add to Blocklist</h2>
  <%= form_with model: [:admin, TopicBlocklist.new], local: true, class: "flex gap-4 items-end" do |f| %>
    <div class="form-group grow">
      <%= f.label :name, "Topic Name to Block" %>
      <%= f.text_field :name, class: "form-input w-full", placeholder: "e.g. Pledge of Allegiance" %>
    </div>
    <div class="form-group grow">
      <%= f.label :reason, "Reason (Optional)" %>
      <%= f.text_field :reason, class: "form-input w-full", placeholder: "Boilerplate, not a topic" %>
    </div>
    <%= f.submit "Block Topic", class: "btn btn--danger" %>
  <% end %>
</div>

<div class="table-wrapper">
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Reason</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @blocklists.each do |item| %>
        <tr>
          <td><%= item.name %></td>
          <td><%= item.reason %></td>
          <td>
            <%= button_to "Remove", admin_topic_blocklist_path(item), method: :delete, class: "btn btn--secondary btn--sm", form: { data: { turbo_confirm: "Are you sure?" } } %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
