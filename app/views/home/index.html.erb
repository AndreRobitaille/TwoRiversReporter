<% content_for(:title) { "Two Rivers Reporter - What's Happening" } %>

<div class="home-intro">
  <h1 class="page-title">Two Rivers Reporter</h1>
  <p class="page-subtitle">
    What's happening in Two Rivers city government
    <%= link_to meetings_path, class: "search-link" do %>
      Search all meetings &#8594;
    <% end %>
  </p>
</div>

<%# === Topic Headline Cards === %>
<div class="card-grid mb-8" style="grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));">
  <% if @coming_up.any? %>
    <div class="card card--warm">
      <div class="card-header">
        <h2 class="card-title">Coming Up</h2>
      </div>
      <div class="card-body">
        <% @coming_up.each do |topic| %>
          <%= render "topic_headline_item", topic: topic %>
        <% end %>
      </div>
      <div class="card-footer">
        <%= link_to "All topics →", topics_path, class: "btn btn--secondary btn--sm" %>
      </div>
    </div>
  <% end %>

  <% if @what_happened.any? %>
    <div class="card card--cool">
      <div class="card-header">
        <h2 class="card-title">What Happened</h2>
      </div>
      <div class="card-body">
        <% @what_happened.each do |topic| %>
          <%= render "topic_headline_item", topic: topic %>
        <% end %>
      </div>
      <div class="card-footer">
        <%= link_to "All topics →", topics_path, class: "btn btn--secondary btn--sm" %>
      </div>
    </div>
  <% end %>
</div>

<% unless @coming_up.any? || @what_happened.any? %>
  <div class="empty-state mb-8">
    <p class="mb-0">No hot topics right now. Check the meetings below to see what's scheduled.</p>
  </div>
<% end %>

<% if @coming_up.any? || @what_happened.any? %>
  <hr class="home-divider">
<% end %>

<%# === Upcoming Meetings === %>
<section class="section">
  <div class="section-header">
    <h2 class="section-title">Upcoming Meetings</h2>
    <span class="section-time-badge">Next 30 days</span>
  </div>

  <% if @upcoming_meeting_groups.any? %>
    <% @upcoming_meeting_groups.each do |group| %>
      <%= render "meeting_week_group", group: group %>
    <% end %>
  <% else %>
    <div class="empty-state">
      <p class="mb-0">No upcoming meetings scheduled.</p>
    </div>
  <% end %>
</section>

<%# === Recently Completed === %>
<section class="section">
  <div class="section-header">
    <h2 class="section-title">Recently Completed</h2>
    <span class="section-time-badge">Past 14 days</span>
  </div>

  <% if @recent_meeting_groups.any? %>
    <% @recent_meeting_groups.each do |group| %>
      <%= render "meeting_week_group", group: group %>
    <% end %>
  <% else %>
    <div class="empty-state">
      <p class="mb-0">No recent meetings.</p>
    </div>
  <% end %>

  <div class="mt-6">
    <%= link_to meetings_path, class: "btn btn--secondary" do %>
      Search all meetings &#8594;
    <% end %>
  </div>
</section>
