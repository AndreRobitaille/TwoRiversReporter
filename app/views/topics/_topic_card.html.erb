<% signals = highlight_signals[topic.id] %>
<%= link_to topic_path(topic), class: ["card card--clickable", ("card--highlighted" if signals)].compact.join(" ") do %>
  <div class="card-header">
    <h3 class="card-title"><%= topic.name %></h3>
  </div>
  <div class="card-body">
    <% if topic.description.present? %>
      <p class="text-secondary mb-2"><%= truncate(topic.description, length: 80) %></p>
    <% end %>
    <div class="flex justify-between items-center text-secondary text-sm">
      <span>Discussed <%= topic.try(:agenda_item_count_cache) || topic.agenda_items.count %> times</span>
      <span class="flex items-center gap-2">
        <% if topic.last_activity_at %>
          Updated <%= time_ago_in_words(topic.last_activity_at) %> ago
        <% end %>
        <%= topic_lifecycle_badge(topic.lifecycle_status) if topic.lifecycle_status %>
      </span>
    </div>
    <% if signals %>
      <div class="card-signals">
        <% signals.each do |label| %>
          <span class="badge badge--outline"><%= label %></span>
        <% end %>
      </div>
    <% end %>
    <div class="mt-3">
      <span class="btn btn--secondary btn--sm">View topic â†’</span>
    </div>
  </div>
<% end %>
